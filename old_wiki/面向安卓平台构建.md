## 引言
本文主要介绍 如何使用 Anuken 提供的 Mod 开发模板 构建 安卓平台 可用的模组文件。

您可能在此过程中需要外国网站，请确保您拥有此能力或合理使用网络辅助工具，此后，本文默认您能正常访问相关网站。

编译出安卓平台的文件主要有两种方式——本地编译和 CI 编译。使用 CI 编译将使用到 GitHub Action 功能，这要求您先拥有一个 GitHub 账号，**下面****<font style="color:#DF2A3F;">默认</font>****您已经拥有之**。（如果注册不明白GitHub账号可以去考虑一下做贴图或者做策划嘛……反正不一定要在代码上吊死，对吧:-）

## 介绍
如果你把你刚才生成好的 JAR 文件拿去直接给安卓设备品鉴的话，大抵会出现这样的状况：

![](https://cdn.nlark.com/yuque/0/2025/png/32523625/1739621694822-ec67f86d-dccd-462f-aa32-0b57060c0637.png)(虽然不是安卓设备，但是报错是一样的）你会收到一个含有你模组主类全限定名的错误，堆栈信息在安卓设备上可能不同。

上述情况的出现，是因为**模组没有从 JAR 文件中读取到你的主类文件。**

那为什么在桌面端好好的模组到了安卓端却不能运行了呢？这就涉及到了类加载机制。

简单来说，桌面端和安卓端虽然同用一套源代码，但是运行时读取的文件并不相同。**普通的编译流程只能生成桌面端所需的**`**.class**`**文件，而安卓却需要**`**.dex**`**文件。**

## **编译方法**
### 本地编译
本方法适用于不想使用 GitHub 者。

1. 首先，配置Android Build Tools，请参考[Android SDK 安装配置](https://www.jianshu.com/p/1b4ccd5b7dab)，但您无需安装模拟器（Emulator)
2. 然后，在你之前运行 jar 任务的地方改为运行 deploy任务
3. 如果没有报错，则配置成功。

### CI 编译
本方法适用于不想在本地配置`d8`，且只有在发布模组时才会考虑到安卓端运行者。

1. 首先，确保你的模组在GitHub上，并且是由模板生成的。
2. 然后，打开你的项目主页，找到Action，打开之。
3. 如果你看到一个绿色的按钮，请点击它。
4. 接下来，找到你最近一次的**提交（Commit）**点击进去，在最下方 Artifact 下将会有一个下载按钮。
5. 最后，解压这个zip文件，**得到一个jar文件（是的这里有套娃）**，即为桌面和安卓共存的模组包

